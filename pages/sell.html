<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Form</title>
    <link rel="stylesheet" href="../styles.css" />
    <link rel="icon" href="../images/favicon.svg" type="image/svg+xml">

    <script src="https://kit.fontawesome.com/186711ed6a.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #141414;
            color: #fff;
        }

        form {
            max-width: 40%;
            margin: 0 auto;
            padding: 20px;
            border: 2px solid #fff;
            border-radius: 10px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #ff3366;
        }

        input,
        select {
            width: 100%;
            padding: 8px;
            margin-bottom: 16px;
            box-sizing: border-box;
            background-color: #333;
            color: #fff;
            border: 1px solid #fff;
            border-radius: 5px;
        }

        #photos {
            margin-bottom: 16px;
        }

        #photos label {
            display: block;
            margin-bottom: 8px;
            color: #ff3366;
        }

        input[type="file"] {
            background-color: #333;
            color: #fff;
            border: 1px solid #fff;
            border-radius: 5px;
        }

        #photoPreview {
            display: flex;
            flex-wrap: wrap;
        }

        #photoPreview img {
            max-width: 100%;
            max-height: 100px;
            border-radius: 5px;
            margin-top: 5px;
            margin-right: 5px;
        }

        .form-section {
            margin-bottom: 20px;
        }

        .form-section label {
            display: block;
            margin-bottom: 8px;
            color: #ff3366;
        }

        .form-section input {
            width: 100%;
            padding: 8px;
            margin-bottom: 16px;
            box-sizing: border-box;
            background-color: #333;
            color: #fff;
            border: 1px solid #fff;
            border-radius: 5px;
        }

        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 16px;
            box-sizing: border-box;
            background-color: #333;
            color: #fff;
            border: 1px solid #fff;
            border-radius: 5px;
            height: 100px;
            overflow-y: hidden; /* Hide vertical scrollbar */
        }

        button[type="submit"] {
            background-color: #ff3366;
            color: #fff;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button[type="submit"]:hover {
            background-color: #e6005c;
        }

        .form-section {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
        }

        .form-section label {
            margin-bottom: 8px;
            color: #ff3366;
        }

        .form-section input,
        .form-section select,
        .form-section textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 16px;
            box-sizing: border-box;
            background-color: #333;
            color: #fff;
            border: 1px solid #fff;
            border-radius: 5px;
        }

        input[type="file"] {
            background-color: #ff3366;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        input[type="file"]::before {
            content: 'Choose File';
            display: inline-block;
            background-color: #333;
            color: #fff;
            padding: 10px 15px;
            border: 1px solid #fff;
            border-radius: 5px;
            margin-right: 10px;
            cursor: pointer;
        }

        input[type="file"]:hover,
        input[type="file"]::before:hover {
            background-color: #e6005c;
        }
        input[type="file"] {
            display: none;
        }

        label[for="propertyPhotos"] {
            background-color: #ff3366;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block; /* Ensure it's displayed inline with the label */
        }

        label[for="propertyPhotos"]:hover {
            background-color: #e6005c;
        }


    </style>
</head>

<body>
    <nav class="navbar">
        <div class="navbar_container">
            <a href="/" id="navbar_logo"> <i class="fas fa-house-flag"></i>AFA</a>
            <div class="navbar_toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <ul class="navbar_menu">
                <li class="navbar_item">
                    <a href="../index.html" class="navbar_link navbar_link_home_sell">Home</a>
                </li>
                <li class="navbar_item">
                    <a href="../index.html" class="navbar_link navbar_link_services_sell">Services</a>
                </li>
                <li class="navbar_item">
                    <a href="/pages/BuyRent.html" class="navbar_link_buy_rent_sell navbar_link">Buy/Rent</a>
                </li>
                <li class="navbar_item">
                    <a href="" class="navbar_link_sell_in_sell navbar_link">Sell</a>
                </li>
                <li class="navbar_btn">
                    <a href="/pages/signIn.html" class="button" id="signIn-button">Sign In</a>
                </li>
                <li class="navbar_btn">
                    <a href="#" class="profile-button" id="profile-button">
                        <i class="fas fa-user fa-sm"></i>
                    </a>
                    <div class="dropdown-content" id="myDropdown">
                        <a href="./property_display.html" id="property-details">Your property-details</a>
                        <a href="#" id="log-out">Log Out</a>
                        <a href="#" id="delete-account">Delete account permamently</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <form id="propertyForm">
        <h1>Upload Property</h1>
        <label for="propertyName">Property Name:</label>
        <input type="text" id="propertyName" name="propertyName" value="Porter Ranch" required>

        <label for="propertydescription">Property Description:</label>
        <textarea id="propertydescription" name="propertydescription" required>
            Welcome to our stunning property, a place where modern luxury meets timeless elegance. This meticulously crafted residence offers an unparalleled lifestyle with breathtaking views and unrivaled amenities. Immerse yourself in the perfect blend of sophistication and comfort. As you step into this architectural masterpiece, you'll be greeted by spacious interiors, high ceilings, and an abundance of natural light. The open-concept design seamlessly connects the living, dining, and kitchen areas, creating a sense of grandeur. Every detail has been thoughtfully considered to provide the utmost in comfort and style. The master suite is a true retreat, featuring a private oasis with a spa-like bathroom and a generous walk-in closet. Each additional bedroom is designed with both aesthetics and functionality in mind, ensuring a comfortable living space for every member of the household. The gourmet kitchen is a chef's delight, equipped with state-of-the-art appliances, custom cabinetry, and a large island perfect for entertaining. Whether you're hosting intimate gatherings or grand events, this home is designed to impress. The outdoor spaces are an extension of the luxurious interiors, offering a tranquil escape with meticulously landscaped gardens, a spacious patio, and possibly even a pool. Imagine unwinding with a glass of wine as you enjoy the sunset from your private sanctuary. This property is not just a home; it's a lifestyle. Discover the epitome of elegance and sophistication in every detail. Your dream home awaits â€“ experience the extraordinary.
        </textarea>

        <label for="propertyType">Property Type:</label>
        <select id="propertyType" name="propertyType" required>
            <option value="Apartment">Apartment</option>
            <option value="House">House</option>
            <option value="Condo">Condo</option>
            <option value="Townhouse">Townhouse</option>
        </select>

        <label for="propertySize">Size:</label>
        <input type="number" id="propertySize" name="propertySize" value="1000" placeholder="Square Foot">

        <label for="propertyRooms">Number of Rooms:</label>
        <input type="number" id="propertyRooms" name="propertyRooms" value="3" required>

        <label for="propertyAddress">Address:</label>
        <input type="text" id="propertyAddress" name="propertyAddress" value="123 Main Street" required>

        <label for="propertyPrice">Price:</label>
        <input type="number" id="propertyPrice" name="propertyPrice" value="" required placeholder="in $">

        <label for="propertyYearBuilt">Year Built:</label>
        <input type="number" id="propertyYearBuilt" name="propertyYearBuilt" value="2000" required>

        <label for="propertyLocation">Google Maps Link:</label>
        <input type="text" id="propertyLocation" name="propertyLocation" value="https://maps.google.com/" required>

        <label for="propertyPhotos">Property Photos:</label>
        <input type="file" id="propertyPhotos" name="propertyPhotos[]" accept="image/*" multiple>

        <div id="photoPreview"></div>

        <label for="propertyGarage">Garage:</label>
        <input type="text" id="propertyGarage" name="propertyGarage" value="2 car garage" required>

        <label for="floodFactor">Flood Factor:</label>
        <input type="text" id="floodFactor" name="floodFactor" value="Low" required>

        <label for="fireFactor">Fire Factor:</label>
        <input type="text" id="fireFactor" name="fireFactor" value="Low" required>

        <label for="heatFactor">Heat Factor:</label>
        <input type="text" id="heatFactor" name="heatFactor" value="Low" required>


        <div class="form-section">
            <label for="parking">Parking:</label>
            <input type="text" id="parking" name="parking" value="On-site parking" required>
        </div>

        <button type="submit">Upload Property</button>
    </form>

    <script src="../app.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI/tZ1a9meezrUb+YGBXSs4U5L/2ZlT/JJZLY/6M=" crossorigin="anonymous"></script>

    <script>
        document.getElementById('propertyForm').addEventListener('submit', async function (event) {
            event.preventDefault();
    
            const name = document.getElementById('propertyName').value; //
            const description = document.getElementById('propertydescription').value; //
            const size = document.getElementById('propertySize').value; //
            const rooms = document.getElementById('propertyRooms').value; //
            const yearBuilt = document.getElementById('propertyYearBuilt').value; //
            const garage = document.getElementById('propertyGarage').value; //
            const type = document.getElementById('propertyType').value.toString(); //
            const floodFactor = document.getElementById('floodFactor').value;
            const fireFactor = document.getElementById('fireFactor').value;
            const heatFactor = document.getElementById('heatFactor').value;
            const address = document.getElementById('propertyAddress').value; //
            const price = document.getElementById('propertyPrice').value; //
            const mapsLink = document.getElementById('propertyLocation').value; //
            const photoPreviews = document.getElementById('photoPreview').getElementsByTagName('img');
            const parking = document.getElementById('parking').value; //
    
            const photos = [];
            for (const img of photoPreviews) {
                const base64String = await getBase64FromImage(img);
                photos.push(base64String);
            }
    
            const propertyData = {
                name,
                description,
                size,
                rooms,
                yearBuilt,
                garage,
                type,
                floodFactor,
                fireFactor,
                heatFactor,
                address,
                price,
                mapsLink,
                photos,
                parking
            };
    
            const existingProperties = JSON.parse(localStorage.getItem('properties')) || [];
            existingProperties.push(propertyData);
            localStorage.setItem('properties', JSON.stringify(existingProperties));
    
            window.location.href = 'property_display.html';
        });
    
        async function getBase64FromImage(img) {
            return new Promise((resolve, reject) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0, img.width, img.height);
    
                const base64String = canvas.toDataURL('image/jpeg').split(',')[1];
                resolve(base64String);
            });
        }
    
        document.getElementById('propertyPhotos').addEventListener('change', function (event) {
            const photoPreview = document.getElementById('photoPreview');
            const files = event.target.files;
    
            for (const file of files) {
                const img = document.createElement('img');
                img.src = URL.createObjectURL(file);
                img.alt = 'Property Photo';
                img.style.maxWidth = '100%';
                img.style.maxHeight = '100px';
                img.style.borderRadius = '5px';
                img.style.marginTop = '5px';
                img.style.marginRight = '5px';
                photoPreview.appendChild(img);
            }
        });
    </script>
    
    
</body>

</html>
